(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{1:function(e,a,t){e.exports={title:"Form_title__3wm12",form_blok:"Form_form_blok__3dTUf",form_blok10:"Form_form_blok10__21c3T",form_label:"Form_form_label__1aIk9",form_control:"Form_form_control__Hwa1W",col:"Form_col__1XT_p",form_file:"Form_form_file__1WXug",btn:"Form_btn__1yeNR",fa:"Form_fa__18oz7"}},27:function(e,a,t){e.exports={container:"MessageStatus_container__3-c40",header:"MessageStatus_header__3auD0",data:"MessageStatus_data__iST_V",theme:"MessageStatus_theme__3iQHu",status:"MessageStatus_status__2SPFx",green:"MessageStatus_green__15Vaq",red:"MessageStatus_red__1D7QE"}},40:function(e,a,t){e.exports={blok:"File_blok__3bG5Y",file:"File_file__1YX0G",fa:"File_fa__HJqSa",delete:"File_delete__2o7vU"}},41:function(e,a,t){e.exports={container:"MessagePage_container__dMst3",header:"MessagePage_header__249WP",data:"MessagePage_data__1Cvpm",theme:"MessagePage_theme__T0lyP",status:"MessagePage_status__16r_O"}},57:function(e,a,t){e.exports={container:"FormPage_container__1hWhO",form:"FormPage_form__HuxW-",fa:"FormPage_fa__L4A1i",loading:"FormPage_loading__3vV0f"}},71:function(e,a,t){e.exports=t(83)},75:function(e,a,t){},76:function(e,a,t){},77:function(e,a,t){},78:function(e,a,t){},83:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(61),l=t.n(s),m=(t(75),t(76),t(77),t(42)),o=t(44),c=t(62),i=t(63),f=t(69),u=t(64),d=t(70),_=(t(78),t(57)),g=t.n(_),p=t(26),v=t.n(p),h=t(1),E=t.n(h),b=t(40),N=t.n(b),k=function(e){var a=e.fileData.map((function(a,t){return r.a.createElement("div",{className:N.a.blok,key:t},r.a.createElement("div",{className:N.a.file},r.a.createElement("i",{className:N.a.fa+" fa fa-paperclip","aria-hidden":"true"}),a.name.split(".")[0].length>15?a.name.split(".")[0].slice(0,15)+"..."+a.name.split(".")[1]:a.name),r.a.createElement("div",{className:N.a.delete},r.a.createElement("i",{className:N.a.fa+" fa fa-trash-o","aria-hidden":"true"}),r.a.createElement("span",{onClick:function(){return e.DeleteFile(t)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c ")))}));return r.a.createElement("div",null,a)},D=t(13),y=t(23),F=y.a().shape({for_name:y.b().min(2,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430*").max(40,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432*").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435*"),from_name:y.b().min(2,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430*").max(40,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432*").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435*"),for_email:y.b().email("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 Email \u0430\u0434\u0440\u0435\u0441*").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435*"),from_email:y.b().email("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 Email \u0430\u0434\u0440\u0435\u0441*").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435*"),theme:y.b().min(2,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430*").max(30,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432*").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435*"),message:y.b().min(2,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430").max(300,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 300 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432*").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435*")}),S=function(e){var a=function(){var a,n,r,s;return v.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:for(a=[],n=document.getElementById("file").files,r=0;r<n.length;r++)a.push({name:document.getElementById("file").files[r].name});return l.next=5,v.a.awrap(t(n));case 5:s=l.sent,e.UpdateFiles(s);case 7:case"end":return l.stop()}}))};function t(e){var a,t,n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:a=[],t=function(t){var n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.a.awrap(new Promise((function(a,n){var r=new FileReader;r.onload=function(){a(r.result.split(",")[1])},r.readAsDataURL(e[t])})));case 2:n=r.sent,a[t]={name:e[t].name,content:n,encoding:"base64"};case 4:case"end":return r.stop()}}))},n=0;case 3:if(!(n<e.length)){r.next=9;break}return r.next=6,v.a.awrap(t(n));case 6:n++,r.next=3;break;case 9:return r.abrupt("return",a);case 10:case"end":return r.stop()}}))}return r.a.createElement(D.c,{initialValues:{for_email:"",for_name:"",from_email:"",from_name:"",theme:"",message:""},validationSchema:F,onSubmit:function(a,t){var n=t.resetForm;a.status="\u0412 \u043e\u0447\u0435\u0440\u0435\u0434\u0438",e.SendMessage(a),setTimeout((function(){n()}),500)},render:function(t){var n=t.errors,s=t.touched,l=t.isValid;return r.a.createElement(D.b,{action:"",className:E.a.container,encType:"multipart/form-data"},r.a.createElement("div",{className:E.a.title},r.a.createElement("h2",null,"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u043b\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439")),r.a.createElement("div",{className:E.a.form_blok},r.a.createElement("span",{className:E.a.form_label},"\u041e\u0442 \u043a\u043e\u0433\u043e"),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:E.a.col+" col"},r.a.createElement(D.a,{type:"text",className:E.a.form_control+" form-control "+(n.from_name&&s.from_name&&" is-invalid"),name:"from_name",placeholder:"\u0418\u043c\u044f"}),r.a.createElement("div",{className:"invalid-feedback"},n.from_name)),r.a.createElement("div",{className:E.a.col+" col"},r.a.createElement(D.a,{type:"text",className:E.a.form_control+" form-control "+(n.from_email&&s.from_email&&" is-invalid"),name:"from_email",placeholder:"Email"}),r.a.createElement("div",{className:"invalid-feedback"},n.from_email)))),r.a.createElement("div",{className:E.a.form_blok},r.a.createElement("span",{className:E.a.form_label},"\u041a\u043e\u043c\u0443"),r.a.createElement("br",null),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:E.a.col+" col"},r.a.createElement(D.a,{type:"text",className:E.a.form_control+" form-control "+(n.for_name&&s.for_name&&" is-invalid"),name:"for_name",placeholder:"\u0418\u043c\u044f"}),r.a.createElement("div",{className:"invalid-feedback"},n.for_name)),r.a.createElement("div",{className:E.a.col+" col"},r.a.createElement(D.a,{type:"text",className:E.a.form_control+" form-control "+(n.for_email&&s.for_email&&" is-invalid"),name:"for_email",placeholder:"Email"}),r.a.createElement("div",{className:"invalid-feedback"},n.for_email)))),r.a.createElement("div",{className:E.a.form_blok},r.a.createElement("span",{className:E.a.form_label},"\u0422\u0435\u043c\u0430 \u043f\u0438\u0441\u044c\u043c\u0430"),r.a.createElement("br",null),r.a.createElement(D.a,{type:"text",className:E.a.form_control+" form-control "+(n.theme&&s.theme&&" is-invalid"),name:"theme",placeholder:" \u0422\u0435\u043c\u0430"}),r.a.createElement("div",{className:"invalid-feedback"},n.theme)),r.a.createElement("div",{className:E.a.form_blok},r.a.createElement("span",{className:E.a.form_label},"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"),r.a.createElement(D.a,{type:"text",className:E.a.form_control+" form-control "+(n.message&&s.message&&" is-invalid"),style:{paddingTop:15,paddingBottom:90},name:"message",placeholder:"\u0412\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"}),r.a.createElement("div",{className:"invalid-feedback"},n.message)),r.a.createElement(k,{fileData:e.state.fileData,DeleteFile:e.DeleteFile}),r.a.createElement("div",{className:E.a.form_file},r.a.createElement("label",{htmlFor:"file"},r.a.createElement("i",{className:E.a.fa+" fa fa-paperclip","aria-hidden":"true"})," \u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u0444\u0430\u0439\u043b"),r.a.createElement(D.a,{type:"file",id:"file",name:"files",multiple:!0,onChange:a})),r.a.createElement("div",{className:E.a.form_blok10},r.a.createElement("button",{type:"submit",className:E.a.btn+" btn btn-primary",disabled:!l},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))}})},w=t(41),x=t.n(w),M=t(27),O=t.n(M),j=function(e){var a;return"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e"===e.status?a="green":"\u041e\u0448\u0438\u0431\u043a\u0430"===e.status&&(a="red"),r.a.createElement("div",{className:O.a.header+" row"},r.a.createElement("div",{className:"col-2 "+O.a.data},e.date),r.a.createElement("div",{className:"col-8 "+O.a.theme},e.theme),r.a.createElement("div",{className:"col-2 "+O.a.status+" "+("green"===a&&O.a.green)+" "+("red"===a&&O.a.red)},e.status))},P=function(e){var a=e.state.messageData.map((function(e,a){return r.a.createElement(j,{key:a,theme:e.theme,status:e.status,date:e.date})}));return r.a.createElement("div",{className:x.a.container},r.a.createElement("h4",null,"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"),0===e.state.messageData.length?r.a.createElement("div",null,"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0435\u0449\u0451 \u043d\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u043b\u0438\u0441\u044c"):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:x.a.header+" row"},r.a.createElement("div",{className:"col-2 "+x.a.data},"\u0414\u0430\u0442\u0430"),r.a.createElement("div",{className:"col-8 "+x.a.theme},"\u0422\u0435\u043c\u0430"),r.a.createElement("div",{className:"col-2 "+x.a.status},"\u0421\u0442\u0430\u0442\u0443\u0441")),a))},T=function(e){var a=!e.state.messageData.some((function(e){return"\u0412 \u043e\u0447\u0435\u0440\u0435\u0434\u0438"===e.status}));return r.a.createElement("div",{className:g.a.container},a?r.a.createElement("div",{className:g.a.form},r.a.createElement(S,e)):r.a.createElement("div",{className:g.a.loading},r.a.createElement("h2",null,"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u044c \u043d\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0443"),r.a.createElement("p",null,"\u0421\u043e\u0432\u0441\u0435\u043c \u0441\u043a\u043e\u0440\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0432\u044b\u043b\u0435\u0442\u0438\u0442 \u0438\u0437 \u0441\u0435\u0440\u0432\u0435\u0440\u0430, \u0438 \u0431\u0443\u0434\u0435\u0442 \u0434\u0432\u0438\u0433\u0430\u0442\u044c\u0441\u044f \u0432 \u0441\u0442\u043e\u0440\u043e\u043d\u0443 \u043f\u043e\u0447\u0442\u044b \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f \xab",e.state.messageData[e.state.messageData.length-1].for_email,"\xbb \u0441\u043e \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c\u044e \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043e\u0432.")),r.a.createElement(P,{state:e.state}),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.ClearHistory()}},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e"))},q=t(68),C=new(t.n(q).a)({auth:{login:"momentalochka@yandex.ru",password:"be7Bukeeg"}}),I={Track:function(e){return C.request({action:"track.get",id:e,session:"session"})},SendMessage:function(e,a){return a=a.map((function(e){return{name:"".concat(e.name),content:"".concat(e.content),encoding:"base64"}})),C.request({action:"issue.send",letter:{subject:e.theme,"from.name":e.from_name,"from.email":e.from_email,"to.name":e.for_name,message:{text:e.message},attaches:a},sendwhen:"test",mca:[e.for_email]})}},W=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(f.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).SendMessage=function(e){var a=["\u042f\u043d\u0432\u0430\u0440\u044f","\u0424\u0435\u0432\u0440\u0430\u043b\u044f","\u041c\u0430\u0440\u0442\u0430","\u0410\u043f\u0440\u0435\u043b\u044f","\u041c\u0430\u044f","\u0418\u044e\u043d\u044f","\u0418\u044e\u043b\u044f","\u0410\u0432\u0433\u0443\u0441\u0442\u0430","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u041e\u043a\u0442\u044f\u0431\u0440\u044f","\u041d\u043e\u044f\u0431\u0440\u044f","\u0414\u0435\u043a\u0430\u0431\u0440\u044f"][(new Date).getMonth()],n=(new Date).getDate();e.date=n+" "+a,t.setState({messageData:[].concat(Object(o.a)(t.state.messageData),[Object(m.a)({},e)])});var r=t.state.fileData;I.SendMessage(e,r).then((function(e){var a=setInterval((function(e){I.Track(e["track.id"]).then((function(e){if("-1"===e.obj.status){clearTimeout(a);var n=t.state.messageData.pop();n.status="\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e",t.setState({messageData:[].concat(Object(o.a)(t.state.messageData),[Object(m.a)({},n)]),fileData:[]})}else if("-2"===e.obj.status){clearTimeout(a);var r=t.state.messageData.pop();r.status="\u041e\u0448\u0438\u0431\u043a\u0430",t.setState({messageData:[].concat(Object(o.a)(t.state.messageData),[Object(m.a)({},r)]),fileData:[]})}}))}),1e3,e,t.state)}))},t.UpdateFiles=function(e){t.setState({fileData:e})},t.DeleteFile=function(e){var a=Object(o.a)(t.state.fileData);a.splice(e,1),t.setState({fileData:a})},t.ClearHistory=function(){localStorage.removeItem("state"),setTimeout((function(){t.setState({messageData:[]})}),300)},t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"componentWillMount",value:function(){localStorage.getItem("state")?this.setState(Object(m.a)({},JSON.parse(localStorage.getItem("state")))):this.setState({fileData:[],messageData:[]})}},{key:"componentWillUpdate",value:function(e,a){localStorage.setItem("state",JSON.stringify(Object(m.a)({},a)))}},{key:"render",value:function(){return r.a.createElement(T,{UpdateFiles:this.UpdateFiles,state:this.state,DeleteFile:this.DeleteFile,Validate:this.Validate,SendMessage:this.SendMessage,ClearHistory:this.ClearHistory})}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[71,1,2]]]);
//# sourceMappingURL=main.36898a66.chunk.js.map