{"version":3,"sources":["components/Form/Form.module.css","components/MessagePage/MessageStatus.module.css","components/File/File.module.css","components/MessagePage/MessagePage.module.css","components/FormPage/FormPage.module.css","components/File/File.jsx","validation/BasicScheme.js","DragDrop/DragDrop.js","components/Form/Form.jsx","components/MessagePage/MessageStatus.jsx","components/MessagePage/MessagePage.jsx","components/FormPage/FormPage.jsx","Api/MessageApi.jsx","App.js","serviceWorker.js","index.js"],"names":["module","exports","FormFile","props","blok","fileData","map","b","index","className","styles","key","file","fa","aria-hidden","name","split","length","slice","delete","onClick","DeleteFile","BasicFormSchema","Yup","shape","for_name","min","max","required","from_name","for_email","email","from_email","theme","message","style","border","height","width","padding","textAlign","spec","drop","monitor","FilesData","getItem","files","i","reader","FileReader","onload","content","result","readAsDataURL","encoding","console","log","UpdateFiles","TargetBox","connectDropTarget","this","React","Component","DropTarget","NativeTypes","FILE","connect","dropTarget","MessageForm","FileUpdate","a","async","Data","Files","document","getElementById","push","CatchFile","d","Promise","resolve","reject","res","DndProvider","backend","Backend","initialValues","validationSchema","onSubmit","values","resetForm","status","SendMessage","setTimeout","render","errors","touched","isValid","action","container","encType","title","form_blok","form_label","col","type","form_control","placeholder","paddingTop","paddingBottom","File","state","form_file","htmlFor","id","multiple","onChange","form_blok10","btn","disabled","MessageStatus","color","header","data","date","green","red","MessagePage","MessageStatusItems","messageData","FormPage","Sending","some","form","Form","loading","ClearHistory","sendsay","Sendsay","auth","login","password","MessageApi","Track","request","e","App","month","Date","getMonth","day","getDate","setState","then","check","setInterval","obj","clearTimeout","last","pop","copyFileData","splice","localStorage","removeItem","JSON","parse","nextProps","nextState","setItem","stringify","Validate","Boolean","window","location","hostname","match","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7d7f59ed.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Form_title__3wm12\",\"form_blok\":\"Form_form_blok__3dTUf\",\"form_blok10\":\"Form_form_blok10__21c3T\",\"form_label\":\"Form_form_label__1aIk9\",\"form_control\":\"Form_form_control__Hwa1W\",\"col\":\"Form_col__1XT_p\",\"form_file\":\"Form_form_file__1WXug\",\"btn\":\"Form_btn__1yeNR\",\"fa\":\"Form_fa__18oz7\",\"DragDrop\":\"Form_DragDrop__a3VCe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"MessageStatus_container__3-c40\",\"header\":\"MessageStatus_header__3auD0\",\"data\":\"MessageStatus_data__iST_V\",\"theme\":\"MessageStatus_theme__3iQHu\",\"status\":\"MessageStatus_status__2SPFx\",\"green\":\"MessageStatus_green__15Vaq\",\"red\":\"MessageStatus_red__1D7QE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"blok\":\"File_blok__3bG5Y\",\"file\":\"File_file__1YX0G\",\"fa\":\"File_fa__HJqSa\",\"delete\":\"File_delete__2o7vU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"MessagePage_container__dMst3\",\"header\":\"MessagePage_header__249WP\",\"data\":\"MessagePage_data__1Cvpm\",\"theme\":\"MessagePage_theme__T0lyP\",\"status\":\"MessagePage_status__16r_O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"FormPage_container__1hWhO\",\"form\":\"FormPage_form__HuxW-\",\"fa\":\"FormPage_fa__L4A1i\",\"loading\":\"FormPage_loading__3vV0f\",\"DragDrop\":\"FormPage_DragDrop__3XTm1\"};","import React from 'react'\r\nimport styles from './File.module.css'\r\n\r\nconst FormFile = (props) => {\r\n    //==== Формируем модули для оттображения файлов ====\r\n    let blok = props.fileData.map((b, index) =>\r\n\r\n        <div className={styles.blok} key={index}>\r\n            <div className={styles.file}>\r\n                <i className={styles.fa + \" fa fa-paperclip\"} aria-hidden=\"true\"></i>\r\n                {b.name.split('.')[0].length > 15 ? (b.name.split('.')[0].slice(0, 15) + \"...\" + b.name.split('.')[1]) : b.name}\r\n            </div>\r\n\r\n            <div className={styles.delete}>\r\n                <i className={styles.fa + \" fa fa-trash-o\"} aria-hidden=\"true\"></i>\r\n                <span onClick={() => props.DeleteFile(index)} >Удалить </span>\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n\r\n    return (\r\n        <div >\r\n            {blok}\r\n        </div>\r\n    )\r\n}\r\nexport default FormFile ","import * as Yup from \"yup\";\r\n//==== Правила для валидации ====\r\nconst BasicFormSchema = Yup.object().shape({\r\n    for_name: Yup.string()\r\n    .min(2, \"Минимум 2 символа*\")\r\n    .max(40, \"Максимум 40 символов*\")\r\n    .required('Обязательное поле*'),\r\n\r\n    from_name: Yup.string()\r\n    .min(2, \"Минимум 2 символа*\")\r\n    .max(40, \"Максимум 40 символов*\")\r\n    .required('Обязательное поле*'),\r\n\r\n    for_email: Yup.string()\r\n    .email(\"Некорректный Email адрес*\")\r\n    .required('Обязательное поле*'),\r\n\r\n    from_email: Yup.string()\r\n    .email(\"Некорректный Email адрес*\")\r\n    .required('Обязательное поле*'),\r\n\r\n    theme: Yup.string()\r\n    .min(2, \"Минимум 2 символа*\")\r\n    .max(30, \"Максимум 30 символов*\")\r\n    .required('Обязательное поле*'),\r\n\r\n    message: Yup.string()\r\n    .min(2, \"Минимум 2 символа\")\r\n    .max(300, \"Максимум 300 символов*\")\r\n    .required('Обязательное поле*'),\r\n  \r\n});\r\nexport default BasicFormSchema;","import React from 'react';\r\nimport {\r\n    DropTarget,\r\n} from 'react-dnd';\r\n\r\nimport { NativeTypes } from 'react-dnd-html5-backend';\r\n\r\nconst style = {\r\n    border: '1px solid gray',\r\n    height: '15rem',\r\n    width: '15rem',\r\n    padding: '2rem',\r\n    textAlign: 'center',\r\n};\r\n\r\nconst spec = {\r\n\r\n    drop(props, monitor) {\r\n        let FilesData = []\r\n        const file = monitor.getItem().files\r\n        for (let i = 0; i < file.length; i++) {\r\n\r\n            const reader = new FileReader();\r\n\r\n            reader.onload = () => {\r\n                FilesData[i].content = reader.result.split(',')[1]\r\n            };\r\n\r\n            reader.readAsDataURL(file[i]);\r\n\r\n            FilesData[i] = {\r\n                name: file[i].name,\r\n                encoding: \"base64\"\r\n            }\r\n\r\n            console.log(FilesData)\r\n        };\r\n           \r\n        props.UpdateFiles(FilesData)\r\n    }\r\n}\r\n\r\nconst collect = (connect, monitor) => ({\r\n    connectDropTarget: connect.dropTarget(),\r\n});\r\n\r\n\r\nclass TargetBox extends React.Component {\r\n    render() {\r\n        const { connectDropTarget } = this.props;\r\n        return connectDropTarget(\r\n            <div style={style}>\r\n            <h2>Бросайте файлы сюда, я ловлю</h2>\r\n                    <p>Мы принимаем картинки (jpg, png, gif), офисные файлы (doc, xls, pdf) и zip-архивы. Размеры файла до 5 МБ</p>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DropTarget(\r\n    NativeTypes.FILE,\r\n    spec,\r\n    collect\r\n)(TargetBox);","import React from 'react'\r\nimport styles from \"./Form.module.css\"\r\nimport File from '../File/File'\r\nimport { Formik, Field, Form } from \"formik\";\r\nimport BasicFormSchema from \"../../validation/BasicScheme\";\r\nimport TargetBox from './../../DragDrop/DragDrop';\r\nimport { DndProvider } from 'react-dnd';\r\nimport Backend from 'react-dnd-html5-backend'\r\n\r\nconst MessageForm = (props) => {\r\n    // ===== Мониторинг полей формы ========\r\n    let FileUpdate = async () => {\r\n        let Data = []\r\n        let Files = document.getElementById('file').files\r\n        for (let i = 0; i < Files.length; i++) {\r\n            Data.push({name : document.getElementById('file').files[i].name})\r\n        }\r\n        let d = await CatchFile(Files)\r\n        props.UpdateFiles(d)     \r\n    }\r\n  \r\n    async function CatchFile(Files) {\r\n        \r\n        const FilesData =[]\r\n        for (let i = 0; i < Files.length; i++) {\r\n            let res = await new Promise((resolve, reject) => {\r\n                let reader = new FileReader()\r\n                reader.onload = function () {\r\n                    resolve(reader.result.split(',')[1])\r\n                    \r\n                };\r\n                reader.readAsDataURL(Files[i]);   \r\n            })\r\n            FilesData[i] = {\r\n                name: Files[i].name,\r\n                content: res,\r\n                encoding: \"base64\"\r\n            }\r\n           \r\n        }\r\n        return FilesData;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <DndProvider backend={Backend}>\r\n                <TargetBox  UpdateFiles = {props.UpdateFiles}/>\r\n            </DndProvider>\r\n        <Formik\r\n            //инициализируем значения input-ов\r\n            initialValues={{\r\n                for_email: '',\r\n                for_name: '',\r\n                from_email: '',\r\n                from_name: '',\r\n                theme: '',\r\n                message: '',\r\n            }}\r\n            //подключаем схему валидации, которую описали выше\r\n            validationSchema={BasicFormSchema}\r\n            //определяем, что будет происходить при вызове onsubmit\r\n            onSubmit={(values, { resetForm }) => {\r\n                values.status = 'В очереди'\r\n                props.SendMessage(values)\r\n                setTimeout(() => {\r\n                    resetForm()\r\n                }, 500);\r\n\r\n            }}\r\n\r\n            //свойство, где описывыем нашу форму\r\n            //errors-ошибки валидации формы\r\n            //touched-поля формы, которые мы \"затронули\",\r\n            //то есть, в которых что-то ввели\r\n            render={({ errors, touched, isValid }) => (\r\n                <Form action='' className={styles.container} encType='multipart/form-data'>\r\n                    <div className={styles.title}><h2>Отправлялка сообщений</h2></div>\r\n\r\n                    <div className={styles.form_blok}>\r\n\r\n                        <span className={styles.form_label}>От кого</span>\r\n\r\n                        <div className=\"form-row\">\r\n\r\n                            <div className={styles.col + \" col\"}>\r\n                                <Field type=\"text\" className={styles.form_control + ' form-control ' + (errors.from_name && touched.from_name && ' is-invalid')} name=\"from_name\" placeholder=\"Имя\" />\r\n\r\n                                <div className=\"invalid-feedback\">\r\n                                    {errors.from_name}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className={styles.col + \" col\"}>\r\n                                <Field type=\"text\" className={styles.form_control + ' form-control ' + (errors.from_email && touched.from_email && ' is-invalid')} name=\"from_email\" placeholder=\"Email\" />\r\n\r\n                                <div className=\"invalid-feedback\">\r\n                                    {errors.from_email}\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className={styles.form_blok}>\r\n                        <span className={styles.form_label}>Кому</span><br />\r\n                        <div className=\"form-row\">\r\n                            <div className={styles.col + \" col\"}>\r\n                                <Field type=\"text\" className={styles.form_control + ' form-control ' + (errors.for_name && touched.for_name && ' is-invalid')} name=\"for_name\" placeholder=\"Имя\" />\r\n\r\n                                <div className=\"invalid-feedback\">\r\n                                    {errors.for_name}\r\n                                </div>\r\n                            </div>\r\n                            <div className={styles.col + \" col\"}>\r\n                                <Field type=\"text\" className={styles.form_control + ' form-control ' + (errors.for_email && touched.for_email && ' is-invalid')} name=\"for_email\" placeholder=\"Email\" />\r\n                                <div className=\"invalid-feedback\">\r\n                                    {errors.for_email}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className={styles.form_blok}>\r\n                        <span className={styles.form_label}>Тема письма</span><br />\r\n                        <Field type=\"text\" className={styles.form_control + ' form-control ' + (errors.theme && touched.theme && ' is-invalid')} name=\"theme\" placeholder=\" Тема\" />\r\n                        <div className=\"invalid-feedback\">\r\n                            {errors.theme}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className={styles.form_blok}>\r\n\r\n                        <span className={styles.form_label}>Сообщение</span>\r\n                        <Field type=\"text\" className={styles.form_control + ' form-control ' + (errors.message && touched.message && ' is-invalid')} style={{ paddingTop: 15, paddingBottom: 90 }} name=\"message\" placeholder=\"Ваше сообщение\" />\r\n                        <div className=\"invalid-feedback\">\r\n                            {errors.message}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <File fileData={props.state.fileData} DeleteFile={props.DeleteFile} />\r\n\r\n                    <div className={styles.form_file}>\r\n                        <label htmlFor=\"file\"><i className={styles.fa + \" fa fa-paperclip\"} aria-hidden=\"true\"></i> Прикрепить файл</label>\r\n                        <Field type=\"file\" id=\"file\" name=\"files\" multiple onChange={FileUpdate} />\r\n                    </div>\r\n\r\n\r\n                    <div className={styles.form_blok10}>\r\n                        <button type=\"submit\" className={styles.btn + \" btn btn-primary\"} disabled={!isValid}>Отправить</button>\r\n\r\n\r\n                    </div>\r\n\r\n\r\n                </Form>\r\n\r\n            )}\r\n\r\n        />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default MessageForm","import React from 'react'\r\nimport styles from './MessageStatus.module.css'\r\nconst MessageStatus = (props) => {\r\n    //Цвет статуса\r\n    let color\r\n    if (props.status === 'Отправлено') {\r\n        color = 'green'\r\n    }\r\n    else if (props.status === 'Ошибка') {\r\n        color = 'red'\r\n    }\r\n\r\n    return (\r\n        <div className={styles.header + \" row\"}>\r\n            <div className={\"col-2 \" + styles.data}>{props.date}</div>\r\n            <div className={\"col-8 \" + styles.theme}>{props.theme}</div>\r\n            <div className={\"col-2 \" + styles.status + \" \" + (color === 'green' && styles.green) + ' ' + (color === 'red' && styles.red)}>{props.status}</div>\r\n        </div>\r\n    )\r\n}\r\nexport default MessageStatus","import React from 'react'\r\nimport styles from './MessagePage.module.css'\r\nimport MessageStatus from './MessageStatus'\r\n\r\n\r\n\r\nconst MessagePage = (props) => {\r\n\r\n    let MessageStatusItems = props.state.messageData.map((i, index) => <MessageStatus key={index} theme={i.theme} status={i.status} date={i.date} />)\r\n    return (\r\n        <div className={styles.container}>\r\n            <h4>Отправленные сообщения</h4>\r\n\r\n            {props.state.messageData.length === 0\r\n                ? <div>Сообщения ещё не отправлялись</div>\r\n\r\n                : <><div className={styles.header + \" row\"}>\r\n                    <div className={\"col-2 \" + styles.data}>Дата</div>\r\n                    <div className={\"col-8 \" + styles.theme}>Тема</div>\r\n                    <div className={\"col-2 \" + styles.status}>Статус</div>\r\n                </div>\r\n\r\n                    {MessageStatusItems}\r\n                </>\r\n            }\r\n        </div>\r\n    )\r\n}\r\nexport default MessagePage","import React from 'react'\r\nimport styles from \"../FormPage/FormPage.module.css\"\r\nimport Form from '../Form/Form'\r\nimport MessagePage from '../MessagePage/MessagePage';\r\nconst FormPage = (props) => {\r\n    let Sending = !props.state.messageData.some(i => i.status === 'В очереди')\r\n    \r\n    return (\r\n        <div className={styles.container}>\r\n            {Sending\r\n\r\n                ? <div className={styles.form}>\r\n                \r\n                    <Form {...props} />\r\n                </div>\r\n\r\n                : <div className={styles.loading}>\r\n                    <h2>Сообщение поставлено в очередь на отправку</h2>\r\n                    <p>Совсем скоро сообщение вылетит из сервера,\r\n                     и будет двигаться в сторону почты получателя\r\n                    «{props.state.messageData[props.state.messageData.length - 1].for_email}»\r\n                    со скоростью электронов.</p>\r\n                </div>\r\n            }\r\n            <MessagePage state={props.state} />\r\n\r\n            <button className=\"btn btn-danger\" onClick={() => props.ClearHistory()}>Очистить историю</button>\r\n        </div>\r\n    )\r\n}\r\nexport default FormPage","import Sendsay from 'sendsay-api';\r\n\r\nconst sendsay = new Sendsay({\r\n  auth: {\r\n    login: 'momentalochka@yandex.ru',\r\n    password: 'be7Bukeeg',\r\n  }\r\n});\r\n\r\n// === Интерфейс запросов ===\r\nexport const MessageApi = {\r\n  //==== Запрос о состоянии ====\r\n  Track(id) {\r\n    return (sendsay.request({\r\n      \"action\": \"track.get\",\r\n      \"id\": id,\r\n      \"session\": \"session\"\r\n    },\r\n    ))\r\n  },\r\n  //==== Отправка сообщения ====\r\n  SendMessage(data, files) {\r\n  \r\n    //==== Создаём пакет файлов ====\r\n    files = files.map(e => e = { 'name': `${e.name}`, 'content': `${e.content}`, 'encoding': `${e.encoding}` })\r\n    return (\r\n      sendsay.request({\r\n\r\n        \"action\": \"issue.send\",\r\n        \"letter\": {\r\n          \"subject\": data.theme,\r\n          \"from.name\": data.from_name,\r\n          \"from.email\": data.from_email,\r\n          \"to.name\": data.for_name,\r\n          \"message\": { \"text\": data.message },\r\n          \"attaches\": files\r\n          // {\r\n          //   \"name\": `${files[0].name}`,\r\n          //   \"content\": `${files[0].content}`,\r\n          //   \"encoding\": \"base64\"\r\n          // },\r\n        },\r\n        \"sendwhen\": \"test\",\r\n        \"mca\": [\r\n          data.for_email,\r\n        ]\r\n      }\r\n      ))\r\n  }\r\n\r\n}\r\n\r\n","import React from 'react';\r\nimport './App.css';\r\nimport FormPage from './components/FormPage/FormPage';\r\nimport { MessageApi } from './Api/MessageApi';\r\n\r\n\r\n\r\nclass App extends React.Component {\r\n\r\n  // ==== Подгружаем инициализационные данные(если есть) ====\r\n  componentWillMount() {\r\n    localStorage.getItem('state')\r\n      ? this.setState({\r\n        ...JSON.parse(localStorage.getItem('state'))\r\n      })\r\n      : this.setState({\r\n        fileData: [],\r\n        messageData: [],\r\n      })\r\n  }\r\n  componentWillUpdate(nextProps, nextState) {\r\n\r\n    localStorage.setItem('state', JSON.stringify({ ...nextState }))\r\n  }\r\n\r\n  // Отправка формы \r\n  SendMessage = (data) => {\r\n    //==== Формируем время отправки сообщения ====\r\n    let monthList = ['Января', 'Февраля', 'Марта', 'Апреля', 'Мая', 'Июня', 'Июля', 'Августа', 'Сентября', 'Октября', 'Ноября', 'Декабря']\r\n    let month = monthList[new Date().getMonth()];\r\n    let day = new Date().getDate();\r\n    data.date = day + ' ' + month;\r\n\r\n    //==== Добавляем поле время объекту с сообщением ====\r\n    this.setState({\r\n      messageData: [...this.state.messageData, { ...data }],\r\n    })\r\n\r\n\r\n\r\n    //==== Отправка сообщения ====\r\n    let files = this.state.fileData\r\n\r\n    MessageApi.SendMessage(data, files)\r\n      .then((res) => {\r\n        let check = setInterval((res) => {\r\n          //==== ожидание завершения отправки ====\r\n          MessageApi.Track(res['track.id'])\r\n            .then((res) => {\r\n\r\n              //==== при успешной отправке ====\r\n              if (res.obj.status === '-1') {\r\n                clearTimeout(check)\r\n                let last = this.state.messageData.pop()\r\n                last.status = 'Отправлено'\r\n                this.setState({\r\n                  messageData: [...this.state.messageData, { ...last }],\r\n                  fileData: [],\r\n                })\r\n              }\r\n              //==== при ошибке ====\r\n              else if (res.obj.status === '-2') {\r\n                clearTimeout(check)\r\n                let last = this.state.messageData.pop()\r\n                last.status = 'Ошибка'\r\n                this.setState({\r\n                  messageData: [...this.state.messageData, { ...last }],\r\n                  fileData: [],\r\n                })\r\n              }\r\n\r\n            });\r\n        }, 1000, res, this.state)\r\n      })\r\n  };\r\n\r\n  //==== Загрузка выбранных файлов ====\r\n  UpdateFiles = (data) => {\r\n    this.setState({\r\n      fileData: data,\r\n    })\r\n  };\r\n\r\n  //==== Удаление файла из списка выбраннных ====\r\n  DeleteFile = (index) => {\r\n    let copyFileData = [...this.state.fileData]\r\n    copyFileData.splice(index, 1)\r\n    this.setState({\r\n      fileData: copyFileData\r\n    })\r\n  };\r\n\r\n  // ==== Очистка localstorage ==== \r\n  ClearHistory = () => {\r\n    localStorage.removeItem('state')\r\n    setTimeout(() => {\r\n      this.setState({\r\n        messageData: [],\r\n      })\r\n    }, 300);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <FormPage UpdateFiles={this.UpdateFiles} state={this.state} DeleteFile={this.DeleteFile} Validate={this.Validate} SendMessage={this.SendMessage} ClearHistory={this.ClearHistory} />\r\n    )\r\n\r\n  }\r\n}\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport './Css/bootstrap.css';\r\nimport './Css/font-awesome-4.7.0/css/font-awesome.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}