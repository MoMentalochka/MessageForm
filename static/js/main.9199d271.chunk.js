(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{2:function(e,a,t){e.exports={title:"Form_title__3wm12",form_blok:"Form_form_blok__3dTUf",form_blok10:"Form_form_blok10__21c3T",form_label:"Form_form_label__1aIk9",form_control:"Form_form_control__Hwa1W",col:"Form_col__1XT_p",form_file:"Form_form_file__1WXug",form_file_label:"Form_form_file_label__2VDqP",btn:"Form_btn__1yeNR",fa:"Form_fa__18oz7",DragDrop:"Form_DragDrop__a3VCe"}},28:function(e,a,t){e.exports={container:"MessageStatus_container__3-c40",header:"MessageStatus_header__3auD0",data:"MessageStatus_data__iST_V",theme:"MessageStatus_theme__3iQHu",status:"MessageStatus_status__2SPFx",green:"MessageStatus_green__15Vaq",red:"MessageStatus_red__1D7QE"}},41:function(e,a,t){e.exports={blok:"File_blok__3bG5Y",file:"File_file__1YX0G",fa:"File_fa__HJqSa",delete:"File_delete__2o7vU"}},42:function(e,a,t){e.exports={container:"MessagePage_container__dMst3",header:"MessagePage_header__249WP",data:"MessagePage_data__1Cvpm",theme:"MessagePage_theme__T0lyP",status:"MessagePage_status__16r_O"}},67:function(e,a,t){e.exports={container:"FormPage_container__1hWhO",form:"FormPage_form__HuxW-",fa:"FormPage_fa__L4A1i",loading:"FormPage_loading__3vV0f",DragDrop:"FormPage_DragDrop__3XTm1"}},77:function(e,a,t){e.exports={dropZone:"DragDrop_dropZone__2IOCp"}},81:function(e,a,t){e.exports=t(92)},85:function(e,a,t){},86:function(e,a,t){},87:function(e,a,t){},88:function(e,a,t){},92:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(73),s=t.n(r),o=(t(85),t(86),t(87),t(43)),m=t(46),c=t(50),i=t(51),f=t(61),d=t(52),_=t(63),u=(t(88),t(67)),g=t.n(u),p=(t(27),t(2)),v=t.n(p),E=t(41),b=t.n(E),h=function(e){var a=e.fileData.map((function(a,t){return l.a.createElement("div",{className:b.a.blok,key:t},l.a.createElement("div",{className:b.a.file},l.a.createElement("i",{className:b.a.fa+" fa fa-paperclip","aria-hidden":"true"}),a.name.split(".")[0].length>15?a.name.split(".")[0].slice(0,15)+"..."+a.name.split(".")[1]:a.name),l.a.createElement("div",{className:b.a.delete},l.a.createElement("i",{className:b.a.fa+" fa fa-trash-o","aria-hidden":"true"}),l.a.createElement("span",{onClick:function(){return e.DeleteFile(t)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c ")))}));return l.a.createElement("div",null,a)},N=t(17),D=t(24),F=D.a().shape({for_name:D.b().min(2,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430*").max(40,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432*").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435*"),from_name:D.b().min(2,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430*").max(40,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432*").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435*"),for_email:D.b().email("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 Email \u0430\u0434\u0440\u0435\u0441*").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435*"),from_email:D.b().email("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 Email \u0430\u0434\u0440\u0435\u0441*").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435*"),theme:D.b().min(2,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430*").max(30,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432*").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435*"),message:D.b().min(2,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430").max(300,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 300 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432*").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435*")}),k=t(95),S=t(60),y=t(77),O=t.n(y),j={drop:function(e,a){for(var t=[],n=a.getItem().files,l=function(e){var a=new FileReader;a.onload=function(){t[e].content=a.result.split(",")[1]},a.readAsDataURL(n[e]),t[e]={name:n[e].name,encoding:"base64"},console.log(t)},r=0;r<n.length;r++)l(r);e.UpdateFiles(t),e.UploadFilesToggler(!1)}},T=function(e){function a(){return Object(c.a)(this,a),Object(f.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(_.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return(0,this.props.connectDropTarget)(l.a.createElement("div",{className:O.a.dropZone},l.a.createElement("div",null,l.a.createElement("h2",null,"\u0411\u0440\u043e\u0441\u0430\u0439\u0442\u0435 \u0444\u0430\u0439\u043b\u044b \u0441\u044e\u0434\u0430, \u044f \u043b\u043e\u0432\u043b\u044e")),l.a.createElement("p",null,"\u041c\u044b \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u043c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 (jpg, png, gif), \u043e\u0444\u0438\u0441\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b (doc, xls, pdf) \u0438 zip-\u0430\u0440\u0445\u0438\u0432\u044b. \u0420\u0430\u0437\u043c\u0435\u0440\u044b \u0444\u0430\u0439\u043b\u0430 \u0434\u043e 5 \u041c\u0411")))}}]),a}(l.a.Component),x=Object(k.a)(S.a.FILE,j,(function(e,a){return{connectDropTarget:e.dropTarget()}}))(T),w=t(94),M=function(e){return l.a.createElement(l.a.Fragment,null," ",e.state.UploadFiles&&l.a.createElement(w.a,{backend:S.b},l.a.createElement(x,{UpdateFiles:e.UpdateFiles,UploadFilesToggler:e.UploadFilesToggler})),l.a.createElement(N.c,{initialValues:{for_email:"",for_name:"",from_email:"",from_name:"",theme:"",message:""},validationSchema:F,onSubmit:function(a,t){var n=t.resetForm;a.status="\u0412 \u043e\u0447\u0435\u0440\u0435\u0434\u0438",e.SendMessage(a),setTimeout((function(){n()}),500)},render:function(a){var t=a.errors,n=a.touched,r=a.isValid;return l.a.createElement(N.b,{action:"",className:v.a.container,encType:"multipart/form-data"},l.a.createElement("div",{className:v.a.title},l.a.createElement("h2",null,"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u043b\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439")),l.a.createElement("div",{className:v.a.form_blok},l.a.createElement("span",{className:v.a.form_label},"\u041e\u0442 \u043a\u043e\u0433\u043e"),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:v.a.col+" col"},l.a.createElement(N.a,{type:"text",className:v.a.form_control+" form-control "+(t.from_name&&n.from_name&&" is-invalid"),name:"from_name",placeholder:"\u0418\u043c\u044f"}),l.a.createElement("div",{className:"invalid-feedback"},t.from_name)),l.a.createElement("div",{className:v.a.col+" col"},l.a.createElement(N.a,{type:"text",className:v.a.form_control+" form-control "+(t.from_email&&n.from_email&&" is-invalid"),name:"from_email",placeholder:"Email"}),l.a.createElement("div",{className:"invalid-feedback"},t.from_email)))),l.a.createElement("div",{className:v.a.form_blok},l.a.createElement("span",{className:v.a.form_label},"\u041a\u043e\u043c\u0443"),l.a.createElement("br",null),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:v.a.col+" col"},l.a.createElement(N.a,{type:"text",className:v.a.form_control+" form-control "+(t.for_name&&n.for_name&&" is-invalid"),name:"for_name",placeholder:"\u0418\u043c\u044f"}),l.a.createElement("div",{className:"invalid-feedback"},t.for_name)),l.a.createElement("div",{className:v.a.col+" col"},l.a.createElement(N.a,{type:"text",className:v.a.form_control+" form-control "+(t.for_email&&n.for_email&&" is-invalid"),name:"for_email",placeholder:"Email"}),l.a.createElement("div",{className:"invalid-feedback"},t.for_email)))),l.a.createElement("div",{className:v.a.form_blok},l.a.createElement("span",{className:v.a.form_label},"\u0422\u0435\u043c\u0430 \u043f\u0438\u0441\u044c\u043c\u0430"),l.a.createElement("br",null),l.a.createElement(N.a,{type:"text",className:v.a.form_control+" form-control "+(t.theme&&n.theme&&" is-invalid"),name:"theme",placeholder:" \u0422\u0435\u043c\u0430"}),l.a.createElement("div",{className:"invalid-feedback"},t.theme)),l.a.createElement("div",{className:v.a.form_blok},l.a.createElement("span",{className:v.a.form_label},"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"),l.a.createElement(N.a,{type:"text",className:v.a.form_control+" form-control "+(t.message&&n.message&&" is-invalid"),style:{paddingTop:15,paddingBottom:90},name:"message",placeholder:"\u0412\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"}),l.a.createElement("div",{className:"invalid-feedback"},t.message)),l.a.createElement(h,{fileData:e.state.fileData,DeleteFile:e.DeleteFile}),l.a.createElement("div",{className:v.a.form_file,onClick:function(){e.UploadFilesToggler(!0)}},l.a.createElement("div",{className:v.a.form_file_label},l.a.createElement("i",{className:v.a.fa+" fa fa-paperclip","aria-hidden":"true"})," \u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u0444\u0430\u0439\u043b")),l.a.createElement("div",{className:v.a.form_blok10},l.a.createElement("button",{type:"submit",className:v.a.btn+" btn btn-primary",disabled:!r},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))}}))},U=t(42),P=t.n(U),C=t(28),q=t.n(C),I=function(e){var a;return"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e"===e.status?a="green":"\u041e\u0448\u0438\u0431\u043a\u0430"===e.status&&(a="red"),l.a.createElement("div",{className:q.a.header+" row"},l.a.createElement("div",{className:"col-2 "+q.a.data},e.date),l.a.createElement("div",{className:"col-8 "+q.a.theme},e.theme),l.a.createElement("div",{className:"col-2 "+q.a.status+" "+("green"===a&&q.a.green)+" "+("red"===a&&q.a.red)},e.status))},V=function(e){var a=e.state.messageData.map((function(e,a){return l.a.createElement(I,{key:a,theme:e.theme,status:e.status,date:e.date})}));return l.a.createElement("div",{className:P.a.container},l.a.createElement("h4",null,"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"),0===e.state.messageData.length?l.a.createElement("div",null,"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0435\u0449\u0451 \u043d\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u043b\u0438\u0441\u044c"):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:P.a.header+" row"},l.a.createElement("div",{className:"col-2 "+P.a.data},"\u0414\u0430\u0442\u0430"),l.a.createElement("div",{className:"col-8 "+P.a.theme},"\u0422\u0435\u043c\u0430"),l.a.createElement("div",{className:"col-2 "+P.a.status},"\u0421\u0442\u0430\u0442\u0443\u0441")),a))},W=function(e){var a=!e.state.messageData.some((function(e){return"\u0412 \u043e\u0447\u0435\u0440\u0435\u0434\u0438"===e.status}));return l.a.createElement("div",{className:g.a.container},a?l.a.createElement("div",{className:g.a.form},l.a.createElement(M,e)):l.a.createElement("div",{className:g.a.loading},l.a.createElement("h2",null,"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u044c \u043d\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0443"),l.a.createElement("p",null,"\u0421\u043e\u0432\u0441\u0435\u043c \u0441\u043a\u043e\u0440\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0432\u044b\u043b\u0435\u0442\u0438\u0442 \u0438\u0437 \u0441\u0435\u0440\u0432\u0435\u0440\u0430, \u0438 \u0431\u0443\u0434\u0435\u0442 \u0434\u0432\u0438\u0433\u0430\u0442\u044c\u0441\u044f \u0432 \u0441\u0442\u043e\u0440\u043e\u043d\u0443 \u043f\u043e\u0447\u0442\u044b \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f \xab",e.state.messageData[e.state.messageData.length-1].for_email,"\xbb \u0441\u043e \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c\u044e \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043e\u0432.")),l.a.createElement(V,{state:e.state}),l.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.ClearHistory()}},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e"))},H=t(79),J=new(t.n(H).a)({auth:{login:"momentalochka@yandex.ru",password:"be7Bukeeg"}}),B={Track:function(e){return J.request({action:"track.get",id:e,session:"session"})},SendMessage:function(e,a){return a=a.map((function(e){return{name:"".concat(e.name),content:"".concat(e.content),encoding:"".concat(e.encoding)}})),J.request({action:"issue.send",letter:{subject:e.theme,"from.name":e.from_name,"from.email":e.from_email,"to.name":e.for_name,message:{text:e.message},attaches:a},sendwhen:"test",mca:[e.for_email]})}},X=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(f.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(l)))).SendMessage=function(e){var a=["\u042f\u043d\u0432\u0430\u0440\u044f","\u0424\u0435\u0432\u0440\u0430\u043b\u044f","\u041c\u0430\u0440\u0442\u0430","\u0410\u043f\u0440\u0435\u043b\u044f","\u041c\u0430\u044f","\u0418\u044e\u043d\u044f","\u0418\u044e\u043b\u044f","\u0410\u0432\u0433\u0443\u0441\u0442\u0430","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u041e\u043a\u0442\u044f\u0431\u0440\u044f","\u041d\u043e\u044f\u0431\u0440\u044f","\u0414\u0435\u043a\u0430\u0431\u0440\u044f"][(new Date).getMonth()],n=(new Date).getDate();e.date=n+" "+a,t.setState({messageData:[].concat(Object(m.a)(t.state.messageData),[Object(o.a)({},e)])});var l=t.state.fileData;B.SendMessage(e,l).then((function(e){var a=setInterval((function(e){B.Track(e["track.id"]).then((function(e){if("-1"===e.obj.status){clearTimeout(a);var n=t.state.messageData.pop();n.status="\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e",t.setState({messageData:[].concat(Object(m.a)(t.state.messageData),[Object(o.a)({},n)]),fileData:[]})}else if("-2"===e.obj.status){clearTimeout(a);var l=t.state.messageData.pop();l.status="\u041e\u0448\u0438\u0431\u043a\u0430",t.setState({messageData:[].concat(Object(m.a)(t.state.messageData),[Object(o.a)({},l)]),fileData:[]})}}))}),1e3,e,t.state)}))},t.UpdateFiles=function(e){t.setState({fileData:e})},t.DeleteFile=function(e){var a=Object(m.a)(t.state.fileData);a.splice(e,1),t.setState({fileData:a})},t.ClearHistory=function(){localStorage.removeItem("state"),setTimeout((function(){t.setState({messageData:[]})}),300)},t.UploadFilesToggler=function(e){t.setState({UploadFiles:e})},t}return Object(_.a)(a,e),Object(i.a)(a,[{key:"componentWillMount",value:function(){localStorage.getItem("state")?this.setState(Object(o.a)({},JSON.parse(localStorage.getItem("state")))):this.setState({fileData:[],messageData:[],UploadFiles:!1})}},{key:"componentWillUpdate",value:function(e,a){localStorage.setItem("state",JSON.stringify(Object(o.a)({},a)))}},{key:"render",value:function(){return l.a.createElement(W,{UpdateFiles:this.UpdateFiles,state:this.state,DeleteFile:this.DeleteFile,Validate:this.Validate,SendMessage:this.SendMessage,ClearHistory:this.ClearHistory,UploadFilesToggler:this.UploadFilesToggler})}}]),a}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[81,1,2]]]);
//# sourceMappingURL=main.9199d271.chunk.js.map